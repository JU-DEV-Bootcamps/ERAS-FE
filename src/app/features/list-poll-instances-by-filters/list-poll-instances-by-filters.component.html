<div class="page-header">
  <h2 class="page-title">Polls Answered</h2>
</div>
<form [formGroup]="filtersForm">
  <div class="form-container">
    <mat-form-field appearance="fill">
      <mat-label for="sl-component">Cohorts</mat-label>
      <mat-select
        id="sl-component"
        (selectionChange)="onSelectionChange()"
        formControlName="selectedCohort"
      >
        <mat-option *ngFor="let cohort of cohortsData" [value]="cohort.id">
          {{ cohort.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label for="sl-component">Poll</mat-label>
      <mat-select
        id="sl-component"
        (selectionChange)="onSelectionChange()"
        formControlName="selectedPoll"
      >
        <mat-option *ngFor="let poll of polls" [value]="poll.uuid">
          {{ poll.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <div class="button-container">
      <button
        mat-fab
        class="button-extended"
        extended
        aria-label="Generate HeatMap"
        disabled="{{ pollInstances.length === 0 }}"
        type="submit"
        (click)="generateHeatMap()"
      >
        <mat-icon>dashboard</mat-icon>
        Heatmap
      </button>
    </div>
  </div>
</form>

@if (loading) {
  <mat-spinner></mat-spinner>
} @else {
  @if (!pollInstances.length) {
    <app-empty-data-message
      title="No data loaded."
      description="Select a Cohort and Poll to list Polls Answered."
    ></app-empty-data-message>
  } @else {
    <app-list
      (actionCalled)="generateHeatMap()"
      (loadCalled)="loadCohortsList()"
      [items]="pollInstances"
      [totalItems]="totalPollInstances"
      [columns]="columns2"
      [actionDatas]="actionDatas"
    />
  }
}
