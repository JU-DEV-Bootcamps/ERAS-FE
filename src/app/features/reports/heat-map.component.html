<div class="page-header">
  <h2 class="page-title">Reports</h2>
</div>

<div class="chart-container-wrapper">
  <div class="form-container">
    <form [formGroup]="myForm" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="fill">
        <mat-label for="sl-component">Polls by name</mat-label>
        <mat-select id="sl-component" formControlName="pollUuid">
          @for (poll of pollsData; track $index) {
            <mat-option [value]="poll.uuid">
              {{ poll.name }}
            </mat-option>
          }
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label for="sl-component">Component</mat-label>
        <mat-select
          id="sl-component"
          formControlName="selectSurveyKinds"
          multiple
        >
          @for (surveyKind of surveyKinds; track surveyKind) {
            <mat-option [value]="surveyKind">{{
              surveyKind[0] + surveyKind.slice(1).toLocaleLowerCase()
            }}</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label for="sl-questions">Questions</mat-label>
        <mat-select
          id="sl-questions"
          formControlName="selectQuestions"
          multiple
        >
          @for (question of questions; track question.description) {
            <mat-option [value]="question.description">{{
              question.description
            }}</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <button mat-fab extended class="button" type="submit">
        <mat-icon>cached</mat-icon>
        Apply
      </button>
    </form>
  </div>
  <div class="filter-container">
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon style="margin-right: 10px">tune</mat-icon>
          Filter Options</mat-panel-title
        >
      </mat-expansion-panel-header>
      <div class="filter-options">
        <button mat-raised-button (click)="openDialog()" color="primary">
          Apply filter
        </button>
      </div>
    </mat-expansion-panel>
  </div>

  <div class="chart-container" #chart>
    <apx-chart
      [series]="chartOptions.series!"
      [chart]="chartOptions.chart!"
      [xaxis]="chartOptions.xaxis!"
      [yaxis]="chartOptions.yaxis!"
      [colors]="chartOptions.colors!"
      [plotOptions]="chartOptions.plotOptions!"
      [title]="chartOptions.title!"
      [tooltip]="chartOptions.tooltip!"
    >
    </apx-chart>
  </div>
</div>
