<div class="page-header">
  <h2 class="page-title">Reports</h2>
</div>

<div class="chart-container-wrapper">
  <div class="form-container">
    <form [formGroup]="myForm" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="fill">
        <mat-label for="sl-component">Component</mat-label>
        <mat-select id="sl-component" formControlName="selSurveyKind">
          @for (surveyKind of surveyKinds; track surveyKind) {
            <mat-option [value]="surveyKind">{{
              surveyKind[0] + surveyKind.slice(1).toLocaleLowerCase()
            }}</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label for="sl-questions">Questions</mat-label>
        <mat-select id="sl-questions" multiple formControlName="selQuestions">
          @for (question of questions; track question.description) {
            <mat-option [value]="question.description">{{
              question.description
            }}</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <button
        mat-fab
        extended
        class="button"
        (click)="openStudentsDetailsDialog()"
      >
        <mat-icon>visibility</mat-icon>
        View Details
      </button>

      <button mat-fab extended class="button" type="submit">
        <mat-icon>cached</mat-icon>
        Apply
      </button>
    </form>
  </div>

  <div class="filter-container">
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon style="margin-right: 10px">tune</mat-icon>
          Filter Options</mat-panel-title
        >
      </mat-expansion-panel-header>
      <div class="filter-options">
        <p class="toggle">
          <mat-slide-toggle [(ngModel)]="isChecked"
            >Filter by variable</mat-slide-toggle
          >
        </p>
        <button
          mat-raised-button
          (click)="showStudentaData()"
          color="primary"
          [disabled]="!isChecked"
        >
          Apply filter
        </button>
      </div>
      @if (isChecked) {
        <mat-form-field class="input-text-variable" appearance="fill">
          <mat-label>Student limit by variable</mat-label>
          <input matInput type="number" />
        </mat-form-field>
      }
    </mat-expansion-panel>
  </div>

  <div class="chart-container" #chart>
    <apx-chart
      [series]="chartOptions.series!"
      [chart]="chartOptions.chart!"
      [xaxis]="chartOptions.xaxis!"
      [yaxis]="chartOptions.yaxis!"
      [colors]="chartOptions.colors!"
      [plotOptions]="chartOptions.plotOptions!"
      [title]="chartOptions.title!"
      [tooltip]="chartOptions.tooltip!"
    >
    </apx-chart>
  </div>
</div>
